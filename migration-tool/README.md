# –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö PostgreSQL

–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–∞—Ä—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö PostgreSQL –≤ –Ω–æ–≤—ã–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏—Å—Ö–æ–¥–Ω—ã–º –ë–î –≤ —Ä–µ–∂–∏–º–µ READ-ONLY (default_transaction_read_only=on)
- **–ë–∞—Ç—á–∏–Ω–≥**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –±–∞—Ç—á–∞–º–∏ –ø–æ 1000 —Å—Ç—Ä–æ–∫ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü**: –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ü–µ–ª–µ–≤–æ–π –ë–î, –æ–Ω–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **ON CONFLICT DO NOTHING**: –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã - –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è
- **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ï—Å–ª–∏ –æ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞/–º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:
```bash
cd migration-tool
```

2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ Go –º–æ–¥—É–ª—å (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω):
```bash
go mod init migration-tool
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
go get github.com/jackc/pgx/v5
go get github.com/jackc/pgx/v5/pgxpool
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```bash
cp config.example.json config.json
```

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.json` —Å–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```json
{
  "migrations": [
    {
      "name": "user-service",
      "source": {
        "host": "—Å—Ç–∞—Ä—ã–π-—Ö–æ—Å—Ç",
        "port": 5432,
        "database": "–∏–º—è_–±–∞–∑—ã",
        "username": "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
        "password": "–ø–∞—Ä–æ–ª—å"
      },
      "target": {
        "host": "–Ω–æ–≤—ã–π-—Ö–æ—Å—Ç",
        "port": 5432,
        "database": "–∏–º—è_–±–∞–∑—ã",
        "username": "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
        "password": "–ø–∞—Ä–æ–ª—å"
      }
    }
  ]
}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- **name**: –ù–∞–∑–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–¥–ª—è –ª–æ–≥–æ–≤)
- **source**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏—Å—Ö–æ–¥–Ω–æ–π –ë–î
  - **host**: –ê–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞
  - **port**: –ü–æ—Ä—Ç (–æ–±—ã—á–Ω–æ 5432)
  - **database**: –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  - **username**: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - **password**: –ü–∞—Ä–æ–ª—å
- **target**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Ü–µ–ª–µ–≤–æ–π –ë–î (–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –ø–æ–ª—è)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
cd cmd
go run main.go
```

–ò–ª–∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å:

```bash
cd cmd
go build -o migrate
./migrate  # –∏–ª–∏ migrate.exe –Ω–∞ Windows
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
===== –ù–∞—á–∞–ª–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö PostgreSQL =====
–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞: 2025-10-20 14:30:00
–ó–∞–≥—Ä—É–∂–µ–Ω–æ 2 –º–∏–≥—Ä–∞—Ü–∏–π –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

[1/2] –ú–∏–≥—Ä–∞—Ü–∏—è: user-service
============================================================
üì• –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É: old-host:5432/user_service_db (READ-ONLY)...
‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
üì§ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ü–µ–ª–µ–≤–æ–π –ë–î: new-host:5432/user_service_db...
‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ü–µ–ª–µ–≤–æ–π –ë–î —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
üìã –ù–∞–π–¥–µ–Ω–æ —Ç–∞–±–ª–∏—Ü: 3

[1/3] –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã: users
  üìä –°—Ç—Ä–æ–∫ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ: 1500
  ‚è≥ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 1000/1500 —Å—Ç—Ä–æ–∫
  ‚úì –í—Å—Ç–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫: 1500
  üìä –í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫ –≤ —Ü–µ–ª–µ–≤–æ–π –ë–î: 1500
‚úÖ –¢–∞–±–ª–∏—Ü–∞ users —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞

[2/3] –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã: sessions
  üìä –°—Ç—Ä–æ–∫ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ: 250
  ‚úì –í—Å—Ç–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫: 250
  üìä –í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫ –≤ —Ü–µ–ª–µ–≤–æ–π –ë–î: 250
‚úÖ –¢–∞–±–ª–∏—Ü–∞ sessions —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞

...

‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è user-service —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

[2/2] –ú–∏–≥—Ä–∞—Ü–∏—è: api-gateway-service
...

===== –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞ =====
–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è: 2025-10-20 14:32:15
```

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏—Å—Ö–æ–¥–Ω—ã–º –ë–î –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `default_transaction_read_only=on`
2. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –°–æ–∑–¥–∞–π—Ç–µ read-only –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö –ë–î:
```sql
CREATE USER readonly_user WITH PASSWORD 'password';
GRANT CONNECT ON DATABASE your_db TO readonly_user;
GRANT USAGE ON SCHEMA public TO readonly_user;
GRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly_user;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO readonly_user;
```

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ON CONFLICT DO NOTHING`, –ø–æ—ç—Ç–æ–º—É:
- –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ –Ω–µ –±—É–¥—É—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è
- **–í–∞–∂–Ω–æ**: –î–ª—è —ç—Ç–æ–≥–æ –≤ —Ü–µ–ª–µ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å PRIMARY KEY –∏–ª–∏ UNIQUE constraints

### –ß—Ç–æ –º–∏–≥—Ä–∏—Ä—É–µ—Ç—Å—è

- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –≤ —Å—Ö–µ–º–µ `public`
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü (–µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ü–µ–ª–µ–≤–æ–π –ë–î)
- ‚ùå –ò–Ω–¥–µ–∫—Å—ã (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
- ‚ùå Foreign keys (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
- ‚ùå –¢—Ä–∏–≥–≥–µ—Ä—ã (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
- ‚ùå Sequences (–∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –î–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±–∞—Ç—á–∞–º–∏ –ø–æ 1000 —Å—Ç—Ä–æ–∫
- –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü (>1M —Å—Ç—Ä–æ–∫) –º–∏–≥—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –Ω–µ–ø–∏–∫–æ–≤—ã–µ —á–∞—Å—ã

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫**:
```sql
-- –ù–∞ –∏—Å—Ö–æ–¥–Ω–æ–π –ë–î
SELECT COUNT(*) FROM your_table;

-- –ù–∞ —Ü–µ–ª–µ–≤–æ–π –ë–î
SELECT COUNT(*) FROM your_table;
```

2. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```sql
CREATE INDEX idx_name ON table_name(column_name);
```

3. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å foreign keys** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```sql
ALTER TABLE child_table
ADD CONSTRAINT fk_name
FOREIGN KEY (column)
REFERENCES parent_table(id);
```

4. **–û–±–Ω–æ–≤–∏—Ç—å sequences** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è):
```sql
SELECT setval('table_id_seq', (SELECT MAX(id) FROM table_name));
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞: "–Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É"

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ö–æ—Å—Ç–∞, –ø–æ—Ä—Ç–∞, –∏–º–µ–Ω–∏ –ë–î
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å–µ—Ç–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å username/password

### –û—à–∏–±–∫–∞: "permission denied"

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- –î–ª—è —Ü–µ–ª–µ–≤–æ–π –ë–î –Ω—É–∂–Ω—ã –ø—Ä–∞–≤–∞ INSERT

### –¢–∞–±–ª–∏—Ü—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

- –§—É–Ω–∫—Ü–∏—è `copyTableStructure` —Å–æ–∑–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π

### –î—É–±–ª–∏–∫–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ü–µ–ª–µ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –µ—Å—Ç—å PRIMARY KEY –∏–ª–∏ UNIQUE constraints
- –ò–Ω–∞—á–µ `ON CONFLICT DO NOTHING` –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –æ–Ω–∏ –æ—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–ª—è –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤—Ä—É—á–Ω—É—é

## –õ–∏—Ü–µ–Ω–∑–∏—è

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞ RepairCopilotBack