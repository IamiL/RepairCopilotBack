syntax = "proto3";

package tz.v1;

option go_package = "repairCopilotBot/tz-bot/proto/tz/v1;tzv1";


service TzService {
  rpc CheckTz(CheckTzRequest) returns (CheckTzResponse);
}

message CheckTzRequest {
  bytes file = 1;
  string filename = 2;
  string request_id = 3;
}

message CheckTzResponse {
  string html_text = 1;
  string css = 2;
  string docId = 3;
  repeated OutInvalidError invalid_errors = 4;
  repeated OutMissingError missing_errors = 5;
  string fileId = 6;
}

message OutInvalidError {
  uint32 id = 1;
  string id_str = 2;
  string group_id = 3;
  string error_code = 4;
  string quote = 5;
  string analysis = 6;
  string critique = 7;
  string verification = 8;
  string suggested_fix = 9;
  string rationale = 10;
  string original_quote = 11;
  repeated string quote_lines = 12;
  bool until_the_end_of_sentence = 13;
  optional int32 start_line_number = 14;
  optional int32 end_line_number = 15;
}

message OutMissingError {
  uint32 id = 1;
  string id_str = 2;
  string group_id = 3;
  string error_code = 4;
  string analysis = 5;
  string critique = 6;
  string verification = 7;
  string suggested_fix = 8;
  string rationale = 9;
}