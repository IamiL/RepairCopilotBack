# Тестирование парсера HTML статей

Этот модуль содержит улучшенные функции для извлечения и восстановления содержимого из множественных `<article>` элементов в HTML документах.

## Структура файлов

- `client.go` - основной файл с функциями `ExtractParagraphs` и `InsertParagraphs`
- `parser_test.go` - стандартные Go тесты (запуск через `go test`)
- `main.go` - исполняемый файл для ручного тестирования различных сценариев
- `README.md` - данная инструкция

## Как запускать тесты

### 1. Стандартные Go тесты
```bash
cd /Users/iamil/dev/uralsteel/RepairCopilotBack/tz-bot/internal/pkg/word-parser2
go test -v
```

### 2. Ручное тестирование конкретных сценариев
```bash
# Показать список всех доступных тестов
go run . 

# Запустить конкретный тест (1-6)
go run . 1    # Простые множественные статьи
go run . 2    # Сложная вложенная структура
go run . 3    # Одна статья
go run . 4    # Без статей
go run . 5    # Пустые статьи
go run . 6    # Статьи с множеством атрибутов

# Запустить все тесты подряд
go run . all
```

## Доступные тестовые сценарии

### 1. Простые множественные статьи
Тестирует базовый случай с двумя статьями, содержащими параграфы и таблицы.

### 2. Сложная вложенная структура
Тестирует более сложный HTML с:
- Множеством атрибутов у статей
- Вложенными элементами (div, ul, li)
- Различными типами контента (h2, p, blockquote, table)

### 3. Одна статья
Проверяет работу с единственной статьей.

### 4. Без статей
Тестирует случай, когда в HTML нет элементов `<article>`.

### 5. Пустые статьи
Проверяет обработку пустых статей и статей только с пробелами.

### 6. Статьи с множеством атрибутов
Тестирует сохранение и восстановление сложных атрибутов HTML элементов.

## Как работает алгоритм

1. **ExtractParagraphs**:
   - Находит все `<article>` элементы в HTML
   - Присваивает каждой статье уникальный номер
   - Извлекает все дочерние блоки из каждой статьи
   - Добавляет служебные атрибуты `data-article` и `data-block` для отслеживания
   - Заменяет содержимое статей на пронумерованные плейсхолдеры

2. **InsertParagraphs**:
   - Парсит извлеченные блоки по номерам статей
   - Группирует блоки по принадлежности к статьям
   - Восстанавливает правильный порядок блоков
   - Удаляет служебные атрибуты
   - Вставляет восстановленное содержимое на место плейсхолдеров

## Пример вывода
При запуске теста вы увидите:
- Исходный HTML
- HTML с плейсхолдерами
- Извлеченные параграфы с служебными атрибутами  
- Восстановленный HTML
- Статус выполнения теста

Это поможет вам понять, как работает алгоритм на различных типах входных данных.